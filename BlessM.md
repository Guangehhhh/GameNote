# 技能系统逻辑
- 释放条件检查
  - 蓝，可释放状态，技能冷却
- 开始检测范围
  - 可释放攻击距离
  - 认知距离
    - 此时执行移动逻辑到可释放攻击距离
  - 技能距离
    - 从攻击距离开始移动自动插值移动到技能距离
- 目标优先逻辑
  - 寻找Enemy 的对象
  - 与自己相关朝向 最近的对象
  - 目标一旦确定就不会变更直到死亡
- 技能逻辑
  - 触发动画
  - 打击执行
  - 攻击计算
  - 消耗计算



# 技能状态

- 判断能否攻击
  - MP,CD，状态，距离
- 触发事件
  - 仇恨，目标技能，自身技能
- 攻击前摇
  - 例如回城 可取消
- 吟唱
  - 吟唱效果
- 执行技能逻辑
  - 触发效果
  - 生成buff
  - 计算伤害
- 技能后摇
- 完成回调

# Ability
- ability 就是通俗意义上的技能，包装成 order 被 unit 调用，ability 本身不负责技能逻辑
- 只有使用 ability 消耗的资源（比如消耗多少魔法）前摇后摇之类的处理，他指向一个 effect
# behavior
- 类型就是添加一个 buff，也就是对一个属性的阶段性修改，behavior 是有状态的
# effect
- 最终组成了一颗 effect 树
- effect 常见的有发射投射物、应用 behavior、周期性的调用下一个 effect
- 对区域进行搜索然后对搜索到的每个对象进行调用 effect、造成伤害、创建单位等
- 需要一些全局的类似 ai 中的黑板数据，记录比如施法者、施法位置、目标攻击位置、目标攻击对象等

# 怪物动画
- 攻击
- 技能
- 移动和闲置
- 状态动画
  - 挨打和眩晕
  - 死亡 ，击倒
