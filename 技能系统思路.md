# 技能系统
- 技能管理器
-  初始化
  - 输入ID
  - 获取文件管理器
  - 输入ID 初始化NPC
    - tbNpcBase结构体
    - tbImmmune
    - tbNPCAIBase
  - 技能
    - 效果

- 通过EventCallback----Action----Modifier----Script的体系来实现的技能系统，具备非常强的扩展性
- 比如发射抛射物就是一个Action，抛射物如果击中使人眩晕就加一个Stun的动作或者是一个Modifier
- 如果需要特殊的判定如每击中一个人伤害增加10%，那么就添加对应的Script，在OnProjectileHit里面进行调用

- 执行逻辑
  - 管理器负责调用技能
    - 技能执行判定逻辑
      - 判定成功
        - 开始播放前摇效果
          - 前摇 包括 吟唱，引导
          - 可以被打断
          - 执行CD
        - 执行技能攻击范围检测
        - 检测成功，计算伤害
        - 执行伤害效果


  - 把技能分为“行为”和“效果”的组合
    - 一般一个技能由一个行为和多个效果组成 行为是效果的载体
    -  又细分为子弹类型 近战类型 作用类型 aoe类型等等效果是指行为作用到目标身上的结果
    - 效果又分为立即效果和持续类效果 立即类效果包括伤害 治疗等
    - 持续效果包括buff和光环你的问题如果说是闪电还是火球
    - 按我的思路来说应该有不同的行为 如果击中后又有不同的效果
    - 比如火球有伤害和灼烧的效果 闪电只有伤害效果效果是类型
    - 不同的效果应该有不同的逻辑处理 就区分出了火球还是闪电

- 时间点 整个技能过程，从起手到反馈，有两个最重要的时间点
  - 出手点和反馈点，前者表示技能效果出现的时间点
  - 后者表示技能作用的时间点。一般而言，在出手点会做一些技能数据读取，
    - 比如上述火球的飞行速度与攻击力，然后是根据数据加载播放正确的技能特效；
    - 而在反馈点做大量的判定与计算，比如上述火球击中B时，判定B是否闪避，是否火免
    - 然后在根据相关数据进行数值计算。当然，如果有的话，不要忘了加载播放火球的击中效果与余焰的燃烧效果。
# 如何来准确确定这两个时间点呢？

- 对于出手点，一种是由设计人员将数值写在配置文档中，另一种是由美术人员在模型动画里做标记位。
  - 直觉上讲，由美术人员在模型的动作里标记是最精确地，但更理智的做法是
  - 尽可能让美术资源单纯的作为一种资源存在，不要与任何游戏逻辑扯上关系
  - 面对游戏这类高频度修改的工程，改配置中的一个数值远比改美术资源来的代价低，效率高
  - 所以这个点，在配置中，叫技能前摇时间，游戏中，通过计时器，该时间段之后就是所谓的出手点。
- 对于反馈点，这个时间点的确认基本上是由程序判定的。
  - 最简单也是最实用的就是碰撞检测点，发生碰撞之时就是技能反馈之时。
  - 碰撞检测是一个持续的过程，一个高效的计时器不可或缺。
- 位置 简单的说，技能特效播放的位置在2D里面就是一个（x,y），在3D里面多了一个Z（x,y,z）
  - 细说开来，可以精确到人物的部位，头身手腿脚，就看游戏的精细程度
  - 越是精细，对人物制作（模型创作），技能特效的要求就越高，越统一规范。
